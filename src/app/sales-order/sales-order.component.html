<ngx-spinner></ngx-spinner>
<section id="tooltip-validation">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-content">
          <div class="card-body">
            <form
              class="needs-validation"
              #orderForm="ngForm"
              (ngSubmit)="orderForm.form.valid"
            >
              <div class="form-row">
                <div class="col-md-2 mb-1">
                  <div class="form-group">
                    <label for="validationTooltip02">Customer Mobile No</label>
                    <input
                      type="number"
                      name="mobileNo"
                      class="form-control"
                      id="validationTooltip02"
                      [(ngModel)]="model.customerMobileNo"
                      #mobileNo="ngModel"
                      [ngClass]="{
                        'is-invalid': orderForm.submitted && mobileNo.invalid,
                        'is-valid': orderForm.submitted && !mobileNo.invalid
                      }"
                      required
                    />
                    <div
                      *ngIf="orderForm.submitted && !mobileNo.errors?.required"
                      class="valid-tooltip"
                    >
                      Looks good!
                    </div>
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="form-group">
                    <label for="validationTooltip02">Customer Name</label>
                    <input
                      type="text"
                      name="customerName"
                      class="form-control"
                      id="validationTooltip02"
                      [(ngModel)]="model.customerName"
                      #customerName="ngModel"
                      [ngClass]="{
                        'is-invalid':
                          orderForm.submitted && customerName.invalid,
                        'is-valid': orderForm.submitted && !customerName.invalid
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        orderForm.submitted && !customerName.errors?.required
                      "
                      class="valid-tooltip"
                    >
                      Looks good!
                    </div>
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="form-group">
                    <label for="validationTooltip02">Customer Address</label>
                    <input
                      type="test"
                      name="customerAddress"
                      #customerAddress="ngModel"
                      class="form-control"
                      id="validationTooltip02"
                      [(ngModel)]="model.customerAddress"
                      #lname="ngModel"
                      [ngClass]="{
                        'is-invalid':
                          orderForm.submitted && customerAddress.invalid,
                        'is-valid': orderForm.submitted && !lname.invalid
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        orderForm.submitted && !customerAddress.errors?.required
                      "
                      class="valid-tooltip"
                    >
                      Looks good!
                    </div>
                  </div>
                </div>
                <div class="col-md-2 mb-1">
                  <div class="form-group">
                    <label for="validationTooltip01">Select Date</label>
                    <input
                      name="fname"
                      placeholder="dd-mm-yyyy"
                      class="form-control"
                      id="validationTooltip01"
                      [(ngModel)]="model.soDate"
                      #fname="ngModel"
                      type="date"
                      [ngClass]="{
                        'is-invalid': orderForm.submitted && fname.invalid,
                        'is-valid': orderForm.submitted && !fname.invalid
                      }"
                      required
                    />
                    <!-- <div class="input-group-append">
                      <div class="input-group-text" (click)="m.toggle()">
                        <i class="fa fa-calendar" style="cursor: pointer"></i>
                      </div>
                    </div> -->
                    <div
                      *ngIf="orderForm.submitted && !fname.errors?.required"
                      class="valid-tooltip"
                    >
                      Looks good!
                    </div>
                  </div>
                </div>
                <div class="col-md-2">
                  <div class="form-group">
                    <label for="validationTooltip01">Delivery Date</label>
                    <input
                      name="deliveryDate"
                      placeholder="dd-mm-yyyy"
                      class="form-control"
                      id="validationTooltip01"
                      [(ngModel)]="model.deliveryDate"
                      #deliveryDate="ngModel"
                      type="date"
                      [ngClass]="{
                        'is-invalid':
                          orderForm.submitted && deliveryDate.invalid,
                        'is-valid': orderForm.submitted && !deliveryDate.invalid
                      }"
                      required
                    />
                    <!-- <div class="input-group-append">
                    <div class="input-group-text" (click)="m.toggle()">
                      <i class="fa fa-calendar" style="cursor: pointer"></i>
                    </div>
                  </div> -->
                    <div
                      *ngIf="
                        orderForm.submitted && !deliveryDate.errors?.required
                      "
                      class="valid-tooltip"
                    >
                      Looks good!
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section id="ngx-datatable-filter">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-content">
          <div class="card-body">
            <!-- ngx-datatable-filter -->
            <fieldset class="form-group">
              <label for="ngx-filter-ref"
                >Search:
                <input
                  id="ngx-filter-ref"
                  class="form-control form-control-sm d-inline-block width-200"
                  type="text"
                  placeholder="Filter the Name column..."
                />
              </label>
            </fieldset>
            <ngx-datatable
              class="bootstrap core-bootstrap"
              style="height: 400px"
              [columns]="columns2"
              [columnMode]="ColumnMode.force"
              [headerHeight]="50"
              [rowHeight]="50"
              [rows]="Items"
              [externalPaging]="false"
              [scrollbarH]="true"
              [scrollbarV]="true"
            >
              <ngx-datatable-column name="Item" prop="itemName" [width]="90">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="item.itemName"
                    name="item{{ rowIndex }}"
                    placeholder="selectItem"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Qty" prop="qty" [width]="90">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="number"
                    class="form-control"
                    [(ngModel)]="item.qty"
                    name="qty{{ rowIndex }}"
                    placeholder="Qty"
                    (keydown.Tab)="addItem();totalQty()"
                    (change)="totalQty()"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Actions">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <a
                    *ngIf="rowIndex != Items.length - 1 || Items.length > 1"
                    (click)="removeItem(rowIndex)"
                    ><i class="ft-trash text-danger cursor-pointer"></i
                  ></a>
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
            <button
              type="button"
              class="btn btn-primary btn-sm"
              (click)="addItem()"
            >
              Add Item
            </button>
            <!-- ngx-datatable-filter -->
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="basic-form-layouts">
  <div class="row match-height">
    <!-- Basic Form ends -->
    <!-- Hidden Label starts -->
    <div class="col-lg-12 col-12">
      <div class="card">
        <div class="card-content">
          <div class="card-body">
            <div class="form-row">
              <div class="col-md-3">Total Items: {{model.totalCount}} </div>
              <div class="col-md-3">Total Qty: {{model.totalQty}}</div>
            </div>
          </div>
          <button
              type="button"
              class="btn btn-primary mr-2 mb-2 ml-2" 
              (click)="onSubmit()"
              *ngIf="!CustomeId"
            >
              <i class="ft-check-square mr-1"></i>Save
            </button>
            <button
              type="button"
              class="btn btn-primary mr-2 mb-2 ml-2"
              (click)="onUpdate()"
              *ngIf="CustomeId"
            >
              <i class="ft-check-square mr-1"></i>Update
            </button>
            <button type="button" class="btn btn-secondary mb-2" (click)="goBack()">
              <i class="ft-x mr-1"></i>Cancel
            </button>
        </div>
      </div>
    </div>
    <!-- Hidden Label ends -->
  </div>
</section>
