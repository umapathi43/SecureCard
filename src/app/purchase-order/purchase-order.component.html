<section id="tooltip-validation">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-content">
          <div class="card-body">
            <form class="needs-validation" #orderForm="ngForm">
              <div class="form-row">
                <div class="col-md-2 mb-1 form-group">
                  <label for="validationTooltip01">Order Date</label>
                  <input
                    type="date"
                    name="fname"
                    class="form-control"
                    id="validationTooltip01"
                    [(ngModel)]="model.orderDate"
                    #fname="ngModel"
                    [ngClass]="{
                      'is-invalid': orderForm.submitted && fname.invalid,
                      'is-valid': orderForm.submitted && !fname.invalid
                    }"
                    required
                  />
                  <!-- <div
                    *ngIf="orderForm.submitted && !fname.errors?.required"
                    class="valid-tooltip"
                  >
                    Looks good!
                  </div> -->
                </div>
                <div class="col-md-2 mb-1 form-group">
                  <label for="validationTooltip02">Supplier</label>
                  <select
                    name="lname"
                    class="form-control"
                    id="validationTooltip02"
                    [(ngModel)]="model.supplierName"
                    #lname="ngModel"
                    [ngClass]="{
                      'is-invalid': orderForm.submitted && lname.invalid,
                      'is-valid': orderForm.submitted && !lname.invalid
                    }"
                    required
                  >
                    <option value="none" selected disabled>
                      select suppiler
                    </option>
                    <option value="supplier">supplier</option>
                  </select>
                  <!-- <div
                    *ngIf="orderForm.submitted && !lname.errors?.required"
                    class="valid-tooltip"
                  >
                    Looks good!
                  </div> -->
                </div>
              </div>
              <button class="btn btn-primary mr-2" type="submit">
                From Min & Max
              </button>
              <button class="btn btn-primary mr-2" type="submit">
                From Sales
              </button>
              <button class="btn btn-primary mr-2" type="submit">
                From Shortage
              </button>
              <button class="btn btn-primary mr-2" type="submit">
                From So
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section id="ngx-datatable-filter">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-content">
          <div class="card-body">
            <!-- ngx-datatable-filter -->
            <fieldset class="form-group">
              <label for="ngx-filter-ref"
                >Search:
                <input
                  id="ngx-filter-ref"
                  class="form-control form-control-sm d-inline-block width-200"
                  type="text"
                  placeholder="Filter the Name column..."
                />
              </label>
            </fieldset>
            <ngx-datatable
              class="bootstrap core-bootstrap"
              style="height: 400px"
              [columns]="columns2"
              [columnMode]="ColumnMode.force"
              [headerHeight]="50"
              [rowHeight]="50"
              [rows]="Items"
              [externalPaging]="false"
              [scrollbarH]="true"
              [scrollbarV]="true"
            >
              <ngx-datatable-column
                name="Item Name"
                prop="itemName"
                [width]="180"
              >
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="item.itemName"
                    name="name{{ rowIndex }}"
                    placeholder="Name"
                    readonly
                    (click)="open(content, rowIndex)"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column
                name="Order Qty"
                prop="orderQty"
                [width]="100"
              >
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="number"
                    class="form-control qtyWidth"
                    [(ngModel)]="item.orderQty"
                    name="batch{{ rowIndex }}"
                    placeholder="OrderQty"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Min Qty" prop="minQty" [width]="80">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="number"
                    readonly
                    class="form-control qtyWidth"
                    [(ngModel)]="item.minQty"
                    name="minQty{{ rowIndex }}"
                    placeholder="min Qty"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Max Qty" prop="maxQty" [width]="80">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="number"
                    readonly
                    class="form-control qtyWidth"
                    [(ngModel)]="item.maxQty"
                    name="maxQty{{ rowIndex }}"
                    placeholder="max Qty"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Stock" prop="stock" [width]="80">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="item.stock"
                    name="stock{{ rowIndex }}"
                    placeholder="Stock"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Y.sale" prop="ysale" [width]="80">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="item.ysale"
                    name="y.sale{{ rowIndex }}"
                    placeholder="Y.sale"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="W.sale" prop="wsale" [width]="80">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="item.wsale"
                    name="wsale{{ rowIndex }}"
                    placeholder="w.sale "
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="M.sale" prop="msale" [width]="80">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="item.msale"
                    name="msale{{ rowIndex }}"
                    placeholder="M.sale"
                  />
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="P.M.Sale" prop="pmSale" [width]="80">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="item.pmSale"
                    name="pmSale{{ rowIndex }}"
                    placeholder="P.M.Sale"
                    (keydown.Tab)="addItem()"
                  />
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="Actions">
                <ng-template
                  let-item="row"
                  ngx-datatable-cell-template
                  let-rowIndex="rowIndex"
                >
                  <a
                    *ngIf="rowIndex != Items.length - 1 || Items.length > 1"
                    (click)="removeItem(rowIndex)"
                    ><i class="ft-trash text-danger cursor-pointer"></i
                  ></a>
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
            <button
              type="button"
              class="btn btn-primary btn-sm"
              (click)="addItem()"
            >
              Add Item
            </button>
            <!-- ngx-datatable-filter -->
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="basic-form-layouts">
  <div class="row match-height">
    <!-- Basic Form ends -->
    <!-- Hidden Label starts -->
    <div class="col-lg-12 col-12">
      <div class="card">
        <div class="card-content">
          <div class="card-body">
            <div class="row">
              <div class="col-md-3">Total Count: {{ Items?.length }}</div>
              <div class="col-md-3">Order Qty: {{ TotalQtys }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Hidden Label ends -->
  </div>
  <button
    *ngIf="!purchaseOrderId"
    type="button"
    [disabled]="!orderForm.valid"
    class="btn btn-primary mr-2"
    (click)="onSubmit()"
  >
    <i class="ft-check-square mr-1"></i>Save
  </button>
  <button
    *ngIf="purchaseOrderId"
    type="button"
    class="btn btn-primary mr-2"
    (click)="onUpdate()"
  >
    <i class="ft-check-square mr-1"></i>Update
  </button>
  <button type="button" class="btn btn-secondary" (click)="goBack()">
    <i class="ft-x mr-1"></i>Cancel
  </button>
</section>

<div class="">
  <div #customizer class="customizer d-none d-lg-none d-xl-block mt-5">
    <a class="customizer-close"> <i class="ft-x font-medium-3"></i></a
    ><a class="customizer-toggle bg-primary" id="customizer-toggle-icon">
      <i class="ft-settings font-medium-1 spinner white align-middle"></i>
    </a>
  </div>
</div>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Item Details</h4>
    <button
      type="button"
      id="cancelModalbtn"
      hidden
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <section id="ngx-datatable-filter">
      <div class="row">
        <div class="col-12">
          <!-- ngx-datatable-filter -->
          <fieldset class="form-group">
            <label for="ngx-filter-ref"
              >Search:
              <input
                id="ngx-filter-ref"
                class="form-control form-control-sm d-inline-block width-200"
                type="text"
                placeholder="Filter the Name column..."
                (keyup)="filterUpdateItem($event)"
              />
            </label>
          </fieldset>
          <ngx-datatable
            class="bootstrap core-bootstrap table-hover "
            [columnMode]="ColumnMode.force"
            [headerHeight]="50"
            [footerHeight]="50"
            rowHeight="auto"
            [limit]="10"
            [rows]="itemArray"
          >
            <ngx-datatable-column name="Name" prop="itemName" [width]="200">
              <ng-template
                let-row="row"
                let-name="value"
                ngx-datatable-cell-template
              >
                <div (click)="onItemSelect(row)">{{ row.itemName }}</div>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column
              name="Max Amt"
              prop="max_amt"
              [width]="50"
            ></ngx-datatable-column>
            <ngx-datatable-column
              name="Max Qty"
              prop="max_qty"
              [width]="50"
            ></ngx-datatable-column>
            <ngx-datatable-column
              name="Min Amt"
              prop="min_amt"
              [width]="50"
            ></ngx-datatable-column>
            <ngx-datatable-column name="Min Qty" prop="min_qty" [width]="50">
            </ngx-datatable-column>
            <ngx-datatable-column name="Pack" prop="packName" [width]="70">
            </ngx-datatable-column>
          </ngx-datatable>
          <!-- ngx-datatable-filter -->
        </div>
      </div>
    </section>
    <!-- <ng-multiselect-dropdown
    [placeholder]="'Search for item..'"
    [settings]="dropdownSettings"
    [data]="itemArray"
    (onSelect)="onItemSelect($event)"
  >
  </ng-multiselect-dropdown> -->
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="modal.close('Save click')"
    >
      Close
    </button>
  </div>
</ng-template>
